sudo: false

language: node_js
node_js:
  - "6"

cache:
  directories:
    - ./node_modules

branches:
  except:
    - /^v[0-9]/ # dont build tags separately as they are build anyway for the push

install:
  - npm prune
  - npm install

script:
  - npm test

deploy:
  provider: npm
  email: npm@blogfoster.com
  api_key:
    secure: "i+nGY/5sNGK4jxNu+/sTtXWVXLlNFwaN/HWR88tObXwvxRt18g9pSnPpqhMMduAFV5kIDcuP3sy34iITDwH/dUuJ5Zrt4jXZ/LVQ65aY2tJmsDNQg/GU/AnU+6ULqkAqUtSbjIruUtcBBmrAWvRPkqFdyq7zLbkTfy8Jhdy/AxBfhFoXf5hCAhEF03DnLwqackHsr2rnxIn0BSaX2I5s+BpljqMWYTXTG4ks5EW4YbxiAHg4Aea/8SqWek7aLV6eDQlpMtj8M+eMhRYWNHLitEB5+a/gFdopWKWva728v9Hi02vtKZjNco5395SBViYcIMjRPPf7+p2UKlx3hbwWUktorNPnVsN/5ERANVloQWm+DepxKesvn/sGrWbVCHylnfkUAGEtHXITTPDXsntVi44Hp9pON56BTQhXPiZ4dasMb16QT8xN7OVr/JtH7fYbbWDsulOXX8Lwr4LFjhfd9z84CbWYMTdC4XurlVO61HW00zM9as+1xhICm4r86lrSHT9VnQ7ZqzwQumUhBEb1i+zn0VFUq/7uRCVIXQeasrnPriW5inG0crLdxnZjiA5HtehwUvAds89mEY/zyejyGKJ41y9CZJwEJ2grBTyDzidmNCibyHrZBaMeWKoHoExM+gxqJEsB4JFmM0luxw8MSnoh2Se5h8073J4YVLQoTzk="
  wait-until-deployed: true
  skip_cleanup: true
  on:
    repo: blogfoster/eslint-config-blogfoster
    branch: master
    condition: $(git describe --exact-match HEAD) # only deploy if the commit is referenced by a tag as well
